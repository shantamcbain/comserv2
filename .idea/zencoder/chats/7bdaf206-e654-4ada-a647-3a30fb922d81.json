{
    "checksum": "de9d1f2ee0c528f2988db4bceac3e18ffab2c63efda976b37b2468bc11319d84",
    "data": {
    "id": "7bdaf206-e654-4ada-a647-3a30fb922d81",
    "createdAt": 1756162229158,
    "updatedAt": 1756162229168,
    "title": "Views: Email rendering improvements Schema: Enc...",
    "messages": [
        {
            "id": "44f62cb9-dcb6-4046-b336-5b0113ec5129",
            "role": "user",
            "content": [
                {
                    "type": "text",
                    "text": "Views: Email rendering improvements"
                },
                {
                    "type": "text",
                    "text": "Schema: Ency + Forager Result classes for database operations"
                },
                {
                    "type": "text",
                    "text": "ðŸ“Š PROGRESS UPDATE:"
                },
                {
                    "type": "text",
                    "text": "Committed: 14 critical files in 4 focused commits"
                },
                {
                    "type": "text",
                    "text": "Remaining: ~439 files (mostly templates + untracked files)"
                },
                {
                    "type": "text",
                    "text": "Strategy: Small, logical commits with clear purposes"
                },
                {
                    "type": "text",
                    "text": "Next Priority: Documentation config files and core templates, then batch process template files by directory."
                },
                {
                    "type": "text",
                    "text": "This systematic approach ensures each commit has a clear purpose and makes the repository history readable and maintainable."
                },
                {
                    "type": "text",
                    "text": "Missed countaing the prompts again"
                }
            ],
            "context": {
                "currentFile": {
                    "path": "Comserv/root/Documentation/documentation_update_summary.tt",
                    "fsPath": "/home/shanta/PycharmProjects/comserv2/Comserv/root/Documentation/documentation_update_summary.tt",
                    "sources": [
                        "opened_tab"
                    ],
                    "content": "[% META title = 'Documentation Update Summary' %]\n[% PageVersion = 'Comserv/root/Documentation/documentation_update_summary.tt,v 0.04 2025/01/16 shanta Exp shanta ' %]\n[% IF c.session.debug_mode == 1 %]\n    [% PageVersion %]\n[% END %]\n\n<!-- Documentation Update Summary Template -->\n<!-- This template guides AI agents in documenting code changes and maintaining doc/code synchronization -->\n\n<div class=\"documentation-content\">\n    <h1><i class=\"fas fa-sync-alt\"></i> Documentation Update Summary</h1>\n    \n    [% IF c.session.roles.grep('developer|admin').size %]\n    <div class=\"alert alert-info\">\n        <strong>Developer/Admin View:</strong> This template provides a structured format for documenting code changes and ensuring documentation stays synchronized with implementation.\n    </div>\n    [% END %]\n\n    <h2><i class=\"fas fa-file-sync\"></i> Documentation Sync Update Summary Template</h2>\n\n    <div class=\"alert alert-warning\">\n        <strong>Instructions for AI Agents:</strong> Fill out each section completely before committing changes.\n    </div>\n\n    <h3><i class=\"fas fa-git-alt\"></i> Git Status Overview</h3>\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <h4><i class=\"fas fa-edit\"></i> Modified Files (M)</h4>\n            <p><strong>Count:</strong> [Number of files with uncommitted changes]</p>\n            <p><strong>Key Categories:</strong> [Controllers/Models/Templates/Documentation/Config]</p>\n            <textarea class=\"form-control\" rows=\"4\" placeholder=\"List critical modified files that need attention...\">[List of modified files requiring documentation updates]</textarea>\n        </div>\n        <div class=\"col-md-6\">\n            <h4><i class=\"fas fa-plus-circle\"></i> Added Files (A)</h4>\n            <p><strong>Count:</strong> [Number of newly added files]</p>\n            <textarea class=\"form-control\" rows=\"4\" placeholder=\"List new files and their purpose...\">[List of added files and brief descriptions]</textarea>\n        </div>\n    </div>\n\n    <h3><i class=\"fas fa-question-circle\"></i> Untracked Files Cleanup</h3>\n    <div class=\"alert alert-info\">\n        <strong>Purpose:</strong> Identify files that should be committed, moved, or removed from the repository.\n    </div>\n    <div class=\"row\">\n        <div class=\"col-md-4\">\n            <h4><i class=\"fas fa-check\"></i> Files to Commit</h4>\n            <textarea class=\"form-control\" rows=\"6\" placeholder=\"Untracked files that should be added to git...\">[List files that need git add]</textarea>\n        </div>\n        <div class=\"col-md-4\">\n            <h4><i class=\"fas fa-arrows-alt\"></i> Files to Relocate</h4>\n            <textarea class=\"form-control\" rows=\"6\" placeholder=\"Files in wrong location that need moving...\">[List files to move and their target locations]</textarea>\n        </div>\n        <div class=\"col-md-4\">\n            <h4><i class=\"fas fa-trash\"></i> Files to Remove</h4>\n            <textarea class=\"form-control\" rows=\"6\" placeholder=\"Obsolete or duplicate files to delete...\">[List files for deletion with reasons]</textarea>\n        </div>\n    </div>\n\n    <h3><i class=\"fas fa-search\"></i> Change Scope</h3>\n    <p><strong>Brief Description:</strong> [Summarize what surface area was touched and the intent of changes]</p>\n    <p><strong>Git Diff Summary:</strong> [High-level overview of changes from git diff --stat]</p>\n\n    <h3><i class=\"fas fa-code\"></i> Current Implementation State</h3>\n    <p><strong>What the code currently does:</strong> [Document the actual behavior implemented in the codebase]</p>\n    <p><strong>Working Features:</strong> [List what is functional and tested]</p>\n    <p><strong>Known Issues:</strong> [Document current problems or limitations]</p>\n\n    <h3><i class=\"fas fa-project-diagram\"></i> Planned Implementation</h3>\n    <p><strong>Intended changes:</strong> [Document what the plan calls for - the target state]</p>\n    <p><strong>Success Criteria:</strong> [How we'll know implementation is complete]</p>\n\n    <h3><i class=\"fas fa-tasks\"></i> Implementation Gap Analysis</h3>\n    <p><strong>Remaining work:</strong> [List what still needs to be done to complete the planned implementation]</p>\n    <p><strong>Blocked Items:</strong> [Issues preventing progress]</p>\n    <p><strong>Next Actions:</strong> [Immediate next steps to take]</p>\n\n    <h3><i class=\"fas fa-users\"></i> Role-Specific Information</h3>\n    <ul>\n        <li><strong><i class=\"fas fa-user\"></i> Normal Users:</strong> [How these changes affect end user experience and interface]</li>\n        <li><strong><i class=\"fas fa-user-cog\"></i> Administrators:</strong> [Configuration, management, or troubleshooting implications]</li>\n        <li><strong><i class=\"fas fa-code\"></i> Developers:</strong> [Technical details, API changes, code structure impacts]</li>\n    </ul>\n\n    <h3><i class=\"fas fa-globe\"></i> Site Impact Assessment</h3>\n    <p><strong>Sites Affected:</strong> [all/MCOOP/specific sites - document deployment scope]</p>\n    <p><strong>Deployment Risk:</strong> [Low/Medium/High with justification]</p>\n    <p><strong>Rollback Plan:</strong> [How to revert changes if needed]</p>\n\n    <h3><i class=\"fas fa-file-code\"></i> File Update Tracking</h3>\n    <p><strong>PageVersions Updated:</strong> [List all .tt and .md files with updated PageVersion headers]</p>\n    <p><strong>Config Files Modified:</strong> [List configuration files that changed]</p>\n    <p><strong>Documentation Links:</strong> [New or updated documentation references]</p>\n\n    <h3><i class=\"fas fa-code-branch\"></i> Code Changes Summary</h3>\n    <p><strong>Diff Summary:</strong> Please attach the unified diff in the PR description as a code block.</p>\n    <p><strong>Lines Changed:</strong> [+additions/-deletions from git diff --stat]</p>\n    <p><strong>Complexity Score:</strong> [Simple/Moderate/Complex based on change scope]</p>\n\n    <h3><i class=\"fas fa-clipboard-check\"></i> Pre-Commit Checklist</h3>\n    <div class=\"row\">\n        <div class=\"col-md-6\">\n            <ul class=\"list-unstyled\">\n                <li><i class=\"fas fa-square\"></i> All modified files reviewed</li>\n                <li><i class=\"fas fa-square\"></i> Documentation updated to match code</li>\n                <li><i class=\"fas fa-square\"></i> PageVersion headers incremented</li>\n                <li><i class=\"fas fa-square\"></i> Untracked files categorized</li>\n                <li><i class=\"fas fa-square\"></i> Obsolete files identified for removal</li>\n            </ul>\n        </div>\n        <div class=\"col-md-6\">\n            <ul class=\"list-unstyled\">\n                <li><i class=\"fas fa-square\"></i> Configuration files validated</li>\n                <li><i class=\"fas fa-square\"></i> No debugging code left in production files</li>\n                <li><i class=\"fas fa-square\"></i> Commit message prepared</li>\n                <li><i class=\"fas fa-square\"></i> Ready for peer review</li>\n                <li><i class=\"fas fa-square\"></i> Deployment plan confirmed</li>\n            </ul>\n        </div>\n    </div>\n\n</div>\n",
                    "language": "plain text"
                },
                "codebaseEnabled": true,
                "usedRules": [
                    "zen-rules://repo/.zencoder/rules/repo.md",
                    "zen-rules://repo/.zencoder/rules/database-standards.md",
                    "zen-rules://repo/.zencoder/rules/template-standards.md",
                    "zen-rules://repo/.zencoder/rules/debugging-protocols.md",
                    "zen-rules://repo/.zencoder/rules/ai-behavior-enforcement.md"
                ]
            },
            "createdAt": 1756162229168,
            "isInternal": false,
            "rawContent": {
                "type": "doc",
                "content": [
                    {
                        "type": "paragraph"
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Views: Email rendering improvements"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Schema: Ency + Forager Result classes for database operations"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "ðŸ“Š PROGRESS UPDATE:"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Committed: 14 critical files in 4 focused commits"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Remaining: ~439 files (mostly templates + untracked files)"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Strategy: Small, logical commits with clear purposes"
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Next Priority: Documentation config files and core templates, then batch process template files by directory."
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "This systematic approach ensures each commit has a clear purpose and makes the repository history readable and maintainable."
                            }
                        ]
                    },
                    {
                        "type": "paragraph",
                        "content": [
                            {
                                "type": "text",
                                "text": "Missed countaing the prompts again "
                            }
                        ]
                    }
                ]
            },
            "autoAppliedRules": [
                {
                    "name": "Repository Information Overview",
                    "description": "Repository Information Overview",
                    "uri": "zen-rules://repo/.zencoder/rules/repo.md",
                    "mimeType": "text/markdown",
                    "content": "\n\n# Comserv Project Information\n\n## Summary\nComserv is a comprehensive web-based system for managing business operations, projects, and documentation. It's built using the Catalyst Perl web framework and provides features for project management, theme customization, and user authentication.\n\n## Structure\n- `Comserv/`: Main application directory containing the core application code\n  - `lib/`: Application code and models\n  - `docs/`: Documentation files\n  - `root/`: Static assets and templates\n  - `script/`: Utility scripts for server management and database operations\n  - `t/`: Test files\n- `app/`: Additional application components\n- `data/`: Data files including pricing information\n- `proxmox/`: Proxmox VE integration components\n\n## Language & Runtime\n**Language**: Perl\n**Version**: 5.x (compatible with Perl 5.40.0)\n**Framework**: Catalyst 5.90130\n**Build System**: Module::Install\n**Package Manager**: CPAN\n\n## Dependencies\n**Main Dependencies**:\n- Catalyst::Runtime (5.90130)\n- Moose\n- DBIx::Class\n- Template (Template Toolkit)\n- JSON/JSON::MaybeXS\n- Log::Log4perl\n- DateTime\n- File::Slurp\n\n**Development Dependencies**:\n- Test::More (0.88+)\n- Test::Pod\n- Test::Pod::Coverage\n- Test::WWW::Mechanize::Catalyst\n- Catalyst::Devel\n\n## Build & Installation\n```bash\ncd Comserv\nperl Makefile.PL\nmake\nmake test\nmake install\n```\n\n## Database\n**Type**: MySQL\n**Setup**: \n```bash\nmysql -u root -p < database_initialization_script.sql\n```\n**Schema Management**: DBIx::Class::Schema::Loader\n\n## Testing\n**Framework**: Test::More\n**Test Location**: Comserv/t/\n**Run Command**:\n```bash\ncd Comserv\nprove -l t/\n```\n\n## Server Execution\n**Development Server**:\n```bash\ncd Comserv\nscript/comserv_server.pl\n```\n**Production Deployment**:\n```bash\ncd Comserv\nscript/comserv_fastcgi.pl\n# or\nstarman --port 5000 --workers 5 comserv.psgi\n```\n\n## Authentication & Authorization\n- Session-based authentication\n- Role-based access control\n- Multiple authentication realms\n- Support for user groups and site-specific permissions\n\n## Features\n- Project management system\n- Theme customization system\n- Email integration\n- PDF generation\n- Proxmox VE integration\n- Multi-site support",
                    "alwaysApply": true
                },
                {
                    "name": "Database Development Standards and Best Practices",
                    "description": "Database Development Standards and Best Practices",
                    "uri": "zen-rules://repo/.zencoder/rules/database-standards.md",
                    "mimeType": "text/markdown",
                    "content": "\n\n# Database Development Standards\n\n## Query Standards\n- **Table Aliases:** Use table aliases in all queries to avoid ambiguity (e.g., 'me.column_name')\n- **Error Handling:** Implement proper error handling with eval blocks and try/catch\n- **Parameterized Queries:** Use parameterized queries to prevent SQL injection\n\n## Schema Management\n- **Naming Conventions:** Follow naming conventions for tables, columns, and relationships\n- **Documentation:** Document schema changes and rationale for future reference\n- **Performance:** Regularly optimize database performance and indexes\n- **Version Control:** Use Git to track schema changes with proper tagging\n- **Backup Protocol:** Always backup database before making schema changes\n\n## Model Standards (DBIx::Class)\n- **Result Classes:** Located in `/home/shanta/PycharmProjects/comserv2/Comserv/lib/Comserv/Model/Schema/Ency/Result/`\n- **Relationships:** Define proper relationships between tables\n- **Validation:** Implement data validation in model classes\n\n## Configuration Priority\n- **Primary:** ZeroTier production server (172.30.161.222) - works from any network\n- **Secondary:** Local network production server (192.168.1.198) - home/office only\n- **Tertiary:** localhost MySQL (development)\n- **Fallback:** SQLite (offline mode)\n\n## Security Protocols\n- **Input Validation:** Validate all user inputs before database operations\n- **Access Controls:** Implement proper access controls based on user roles\n- **Regular Reviews:** Regularly review and update security protocols",
                    "alwaysApply": true
                },
                {
                    "name": "Template Toolkit Standards and Requirements",
                    "description": "Template Toolkit Standards and Requirements",
                    "uri": "zen-rules://repo/.zencoder/rules/template-standards.md",
                    "mimeType": "text/markdown",
                    "content": "\n\n# Template Toolkit (.tt) Standards\n\n## Required PageVersion Header Format\nAll .tt files must include this exact format:\n```\n[% META title = 'Page Title Here' %]\n[% PageVersion = 'relative/path/filename.tt,v 0.01 YYYY/MM/DD author Exp author ' %]\n[% IF c.session.debug_mode == 1 %]\n    [% PageVersion %]\n[% END %]\n```\n\n## Template Standards\n- **Theme Compliance:** Use theme system variables for styling - NO page-specific CSS\n- **Debug Mode:** Include debug mode blocks for development visibility\n- **Responsive Design:** Implement mobile-first responsive design patterns\n- **HTML Structure:** Use proper semantic HTML structure\n- **Template Toolkit:** Follow Template Toolkit best practices\n\n## Navigation Integration\nWhen working with navigation templates:\n- **Main Navigation:** Include via `/Navigation/navigation.tt`\n- **Admin Menu:** Use `/Navigation/admintopmenu.tt` for admin-only sections\n- **Dropdown Menus:** Reference existing dropdown templates in `/Navigation/` directory\n\n## Documentation File Rules - CRITICAL\n- **File Format:** ONLY `.tt` files for application documentation - NO `.md` files\n- **EXISTING FILES FIRST:** ALWAYS search for and use existing files before creating new ones\n- **Naming Consistency:** Use same file names across AI sessions to prevent content loss\n- **Content Priority:** Always improve existing files rather than creating new ones\n- **Role-Based Access:** Respect existing Documentation/index.tt role-based structure\n- **Directory Consolidation:** Use established directory structure - don't create new directories\n- **MANDATORY SYNC:** Always verify documentation matches actual code functionality\n- **DISCREPANCY TRACKING:** Document all differences between docs and code\n- **UPDATE PRIORITY:** Fix documentation discrepancies before implementing new features\n\n## Documentation Synchronization Protocol\n1. **Read Current Documentation:** Understand documented behavior\n2. **Read Actual Code:** Understand actual implementation\n3. **Compare States:** Identify discrepancies\n4. **Fix Documentation:** Update docs to match current code state\n5. **Implement Changes:** Make code modifications\n6. **Update Documentation:** Reflect new functionality\n7. **Verify Consistency:** Ensure docs and code align\n\n## File Creation Protocol\n1. **Search First:** Use file search tools to find existing similar files\n2. **Check Directory:** Look at existing directory structure in target location\n3. **Ask User:** If multiple similar files exist, ask which should be updated\n4. **Update Existing:** Improve existing files rather than creating duplicates\n\n## Documentation Configuration Management - CRITICAL\nWhen adding new documentation files (.tt):\n- **ALWAYS update:** `/home/shanta/PycharmProjects/comserv2/Comserv/root/Documentation/config/documentation_config.json`\n- **NEVER update:** `/home/shanta/PycharmProjects/comserv2/Comserv/root/Documentation/documentation_config.json` (legacy file)\n- **Required fields:** id, title, description, path, categories, roles, site, format\n- **Format:** \"template\" for .tt files, \"markdown\" for .md files\n- **Categories:** Use existing categories: user_guides, admin_guides, developer_guides, tutorials, modules, controllers, models, changelog, proxmox, documentation, templates\n- **Roles:** [\"developer\", \"admin\"] for technical docs, [\"normal\", \"editor\", \"admin\", \"developer\"] for user docs",
                    "alwaysApply": true
                },
                {
                    "name": "Systematic Debugging and Documentation Sync Protocols",
                    "description": "Systematic Debugging and Documentation Sync Protocols",
                    "uri": "zen-rules://repo/.zencoder/rules/debugging-protocols.md",
                    "mimeType": "text/markdown",
                    "content": "\n\n# Systematic Debugging Protocol\n\n## MANDATORY DEBUGGING WORKFLOW\n\n### Step 1: Complete Analysis Phase\n1. **Read Zencoder Guidelines:** Review all .zencoder/rules/ files\n2. **Read Application Documentation:** Study relevant .tt documentation files\n3. **Read Codebase Components:**\n   - Controllers (*.pm in Controller/)\n   - Models (*.pm in Model/)\n   - Templates (*.tt in root/)\n   - Schema files (Result/*.pm)\n4. **Application Log Analysis:** Read `/Comserv/logs/application.log`\n5. **Trace Execution Path:** Follow code path that leads to error\n\n### Step 2: State Comparison & Documentation\n1. **Document Current State:** What the code actually does\n2. **Document Expected State:** What documentation says it should do\n3. **List Discrepancies:** All differences between docs and code\n4. **Error Analysis:** Actual errors vs expected behavior\n5. **Create Fix Plan:** Include both code fixes and documentation updates\n\n### Step 3: Implementation Priority\n1. **Fix Documentation Discrepancies FIRST:** Align docs with current code\n2. **Implement Bug Fix:** Apply necessary code changes\n3. **Update Documentation:** Reflect new functionality\n4. **Test Implementation:** Verify fix works correctly\n5. **Document Changes:** Record what was changed and why\n\n### Step 4: Verification & Commit\n1. **Final State Check:** Ensure docs and code are synchronized\n2. **Test Complete Workflow:** Verify end-to-end functionality\n3. **Present Changes:** Show all modifications in diff format\n4. **Commit Preparation:** Ready for version control\n5. **Update Task Status:** Mark completed items, note remaining work\n\n## Log Analysis Protocol\n- **Primary Log:** `/home/shanta/PycharmProjects/comserv2/Comserv/logs/application.log`\n- **Error Patterns:** Look for stack traces, method calls, variable states\n- **Execution Flow:** Trace request path through controllers and models\n- **Debug Mode:** Enable session debug_mode for detailed output\n\n## Documentation Sync Requirements\n- **NEVER ignore documentation discrepancies**\n- **ALWAYS fix docs before implementing new features**\n- **TRACK all changes made to maintain consistency**\n- **UPDATE documentation to reflect new code behavior**\n\n## Code Change Format\nPresent all changes using +- diff format:\n```diff\n--- original/file/path\n+++ modified/file/path\n@@ -line,count +line,count @@\n-removed line\n+added line\n unchanged line\n```\n\n## Performance Issues\n- **Database Queries:** Check for slow queries\n- **Memory Usage:** Monitor memory consumption\n- **Template Rendering:** Check template compilation times\n- **Network Latency:** Consider network-related delays",
                    "alwaysApply": true
                },
                {
                    "name": "AI Behavior Enforcement Rules for Zencoder",
                    "description": "AI Behavior Enforcement Rules for Zencoder",
                    "uri": "zen-rules://repo/.zencoder/rules/ai-behavior-enforcement.md",
                    "mimeType": "text/markdown",
                    "content": "\n\n# AI Behavior Enforcement Rules\n\n## MANDATORY PROMPT TRACKING\n**CURRENT PROMPT:** This is prompt #[X] of 5 maximum allowed prompts.\n\n### Prompt Counter Protocol\n- **Maximum Prompts:** 5 prompts per session - STRICTLY ENFORCED\n- **Track Internally:** Keep running count throughout conversation\n- **Warn at Prompt 4:** Alert user that next prompt will trigger handoff\n- **Stop at Prompt 5:** Refuse to continue, provide handoff documentation\n\n## APPROVAL-BASED CODE REVIEW WORKFLOW\n\n### 4-Phase Implementation Protocol\n1. **ANALYZE:** Complete analysis phase first (read docs, code, logs)\n2. **PLAN:** Present comprehensive plan and get user approval\n3. **DIFF:** Show exact changes in diff format for user review/editing\n4. **APPLY:** Execute changes only after final user approval\n\n### Phase 1: Planning & Approval\nPresent plan in this format:\n```\nðŸ”„ PROPOSED PLAN: [brief description]\nðŸ“‹ FILES TO MODIFY: [list of files]\nðŸ“ CHANGES OVERVIEW: [what will be accomplished]\nðŸ’¡ REASON: [why this approach]\n\nâš ï¸ APPROVAL REQUIRED: Please confirm with \"yes\" or \"approved\"\n```\n\n### Phase 2: Diff Presentation (After Approval)\nShow exact changes using +- diff format:\n```diff\n--- /path/to/file.ext\n+++ /path/to/file.ext\n@@ -line,count +line,count @@\n-old code line\n+new code line\n unchanged line\n```\n\n### Phase 3: User Review & Edit Opportunity\n```\nðŸ“ REVIEW REQUIRED: Please review the diff above\nâœï¸ EDIT OPTION: You can modify these changes before I apply them\nâœ… APPLY: Say \"apply\" or \"yes\" to implement these exact changes\nðŸ”„ REVERT: Changes can be undone after application if needed\n```\n\n### Phase 4: Application (Only After Final Approval)\n- Execute changes exactly as shown in approved diff\n- Confirm completion\n- Provide revert instructions if needed\n\n## VIOLATION CONSEQUENCES\n- **Prompt Limit Exceeded:** Immediate session termination with handoff\n- **Unapproved Changes:** Acknowledge violation and request approval retroactively\n- **Missing Counter:** Add prompt counter to current response\n\n## HANDOFF TEMPLATE (Use on 5th Prompt)\n```\nðŸš¨ PROMPT LIMIT REACHED - HANDOFF REQUIRED\n\nðŸ“Š SESSION SUMMARY:\n- Prompts Used: 5/5\n- Files Modified: [list]\n- Tasks Completed: [list]\n- Tasks Remaining: [list]\n\nðŸ”„ HANDOFF PROMPT FOR NEXT AI:\n\"Continue working on [project/task]. Read development-guidelines.md and ai-behavior-enforcement.md first. \nCurrent context: [brief context]\nFiles being worked on: [list]\nNext steps needed: [specific actions]\"\n\nðŸ“š REQUIRED READING FOR NEXT AI:\n- .zencoder/rules/development-guidelines.md\n- .zencoder/rules/ai-behavior-enforcement.md\n- [any other relevant docs]\n\nâœ… DOCUMENTATION UPDATED: [what was recorded]\n```\n\n## EMERGENCY PROTOCOLS\n- **User Says \"Stop\":** Immediately cease all activities\n- **User Says \"Revert\":** Provide instructions for undoing changes\n- **User Says \"Handoff\":** Immediately provide handoff documentation",
                    "alwaysApply": true
                }
            ]
        }
    ],
    "isAgent": false,
    "isCustomAgent": false,
    "isUnitTestsAgent": false,
    "isE2EAgent": false,
    "isWebDevAgent": true,
    "isQnaAgent": false,
    "isRepoInfoAgent": false,
    "autoApply": false,
    "model": "default"
}
}