[% PageVersion = 'Comserv/root/Navigation/manage_private_links.tt,v 0.02 2025/01/02 shanta Exp shanta ' %]
[% IF c.session.debug_mode == 1 %]
    [% PageVersion %]
[% END %]

[% META title = 'Manage Private Links' %]

<div class="container">
    <header class="page-header">
        <h1><i class="icon-link"></i> Manage Private Links</h1>
        <p class="page-description">Manage your personal links that appear in your user dropdown menu.</p>
    </header>

    [% IF c.flash.error_msg %]
        <div class="alert alert-danger">
            <i class="icon-exclamation-triangle"></i> [% c.flash.error_msg %]
        </div>
    [% END %]

    [% IF c.flash.success_msg %]
        <div class="alert alert-success">
            <i class="icon-check"></i> [% c.flash.success_msg %]
        </div>
    [% END %]

    <div class="mb-3">
        <a href="/Navigation/add_private_link" class="btn btn-success">
            <i class="icon-plus"></i> Add New Private Link
        </a>
    </div>

    [% IF private_links && private_links.size %]
        <div class="card">
            <div class="card-header">
                <h2><i class="icon-list"></i> Your Private Links ([% private_links.size %])</h2>
            </div>
            <div class="card-body">
                [% FOREACH link IN private_links %]
                    <div class="card mb-3">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-2">
                                <h5 class="card-title">
                                    <i class="icon-link"></i> [% link.name %]
                                </h5>
                                <div class="btn-group">
                                    <a href="[% link.url %]" 
                                       target="[% link.target %]" 
                                       class="btn btn-sm btn-info"
                                       title="Open link">
                                        <i class="icon-external-link"></i>
                                    </a>
                                    <a href="/Navigation/edit_private_link/[% link.id %]" 
                                       class="btn btn-sm btn-warning"
                                       title="Edit link">
                                        <i class="icon-edit"></i>
                                    </a>
                                    <a href="/Navigation/delete_private_link/[% link.id %]" 
                                       class="btn btn-sm btn-danger"
                                       onclick="return confirm('Are you sure you want to delete this private link?')"
                                       title="Delete link">
                                        <i class="icon-trash"></i>
                                    </a>
                                </div>
                            </div>
                            
                            <div class="mb-2">
                                <strong>URL:</strong> 
                                <a href="[% link.url %]" target="[% link.target %]" class="text-info">
                                    [% link.url %]
                                </a>
                            </div>
                            
                            <div class="text-muted small">
                                <span class="me-3">
                                    <strong>Opens in:</strong> 
                                    [% IF link.target == '_blank' %]
                                        New window/tab
                                    [% ELSE %]
                                        Same window/tab
                                    [% END %]
                                </span>
                                
                                [% IF link.created_at %]
                                    <span>
                                        <strong>Added:</strong> [% link.created_at %]
                                    </span>
                                [% END %]
                            </div>
                        </div>
                    </div>
                [% END %]
            </div>
        </div>
    [% ELSE %]
        <div class="card text-center">
            <div class="card-body">
                <div class="mb-3">
                    <i class="icon-link" style="font-size: 3rem; opacity: 0.5;"></i>
                </div>
                <h4>No Private Links Yet</h4>
                <p class="text-muted">You haven't added any private links yet. Private links are personal shortcuts that appear in your user dropdown menu.</p>
                <a href="/Navigation/add_private_link" class="btn btn-success">
                    <i class="icon-plus"></i> Add Your First Private Link
                </a>
            </div>
        </div>
    [% END %]

    <div class="card mt-4">
        <div class="card-header">
            <h3><i class="icon-info-circle"></i> About Private Links</h3>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5><i class="icon-user"></i> Personal</h5>
                    <p class="text-muted">Only you can see your private links - they're not visible to other users.</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h5><i class="icon-globe"></i> Site-Specific</h5>
                    <p class="text-muted">Links are associated with the current site you're logged into.</p>
                </div>
                <div class="col-md-4 mb-3">
                    <h5><i class="icon-dropdown"></i> Quick Access</h5>
                    <p class="text-muted">Access your links quickly from the user dropdown in the top navigation.</p>
                </div>
            </div>
        </div>
    </div>
</div>

