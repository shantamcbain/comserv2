[% PageVersion = 'Comserv/root/Documentation/controllers.tt,v 0.02 2025/01/20 shanta Exp shanta ' %]
[% IF c.session.debug_mode == 1 %]
    [% PageVersion %]
[% END %]

[% META title = 'Controller Documentation' %]

<!-- Controller Documentation Section -->
[% IF categories.controllers %]
    <div class="section">
        <div class="section-header collapsible-header" onclick="toggleSection('controllers-section')">
            <h3><i class="fas fa-cogs"></i>Controller Documentation <span class="toggle-icon"></span></h3>
        </div>
        <div id="controllers-section" class="section-content collapsible-content" style="display: none;">
            <p>Technical details for system controllers. <span class="admin-badge">Admin Only</span></p>
            
            <div class="feature-grid">
        <div class="feature-card">
            <div class="feature-header">
                <h4><i class="fas fa-list feature-icon"></i>System Overview</h4>
            </div>
            <div class="feature-content">
                <p>Complete list and status of all controllers in the system.</p>
            </div>
            <div class="feature-actions">
                <a href="[% c.uri_for('/Documentation/controllers/index') %]" class="btn btn-primary">All Controllers</a>
                <a href="[% c.uri_for('/Documentation/controllers/controller_list') %]" class="btn btn-secondary">Documentation Status</a>
            </div>
        </div>
        
        [% controller_count = 0 %]
        [% IF c.session.debug_mode == 1 %]
            <div class="feature-card">
                <div class="feature-header">
                    <h4><i class="fas fa-bug feature-icon"></i>Debug Information</h4>
                </div>
                <div class="feature-content">
                    <p>Controller pages: [% categories.controllers.pages.size %]</p>
                    <p>Pages: [% categories.controllers.pages.join(", ") %]</p>
                </div>
            </div>
        [% END %]
        
        [% FOREACH page_name IN categories.controllers.pages.sort %]
            [% IF structured_pages.$page_name %]
                [% page = structured_pages.$page_name %]
                [% controller_count = controller_count + 1 %]
                <div class="feature-card">
                    <div class="feature-header">
                        <h4><i class="fas fa-file-code feature-icon"></i>[% page.title %]</h4>
                    </div>
                    <div class="feature-content">
                        <p>[% page.description || 'Controller documentation.' %]</p>
                        <span class="role-badge">Admin Only</span>
                    </div>
                    <div class="feature-actions">
                        <a href="[% page.url %]" class="btn btn-primary">View Documentation</a>
                    </div>
                </div>
            [% END %]
        [% END %]
        
        [% IF controller_count == 0 %]
            <div class="feature-card">
                <div class="feature-header">
                    <h4><i class="fas fa-exclamation-triangle feature-icon"></i>No Documentation Found</h4>
                </div>
                <div class="feature-content">
                    <p>No controller documentation files found. Please check the Documentation controller configuration.</p>
                </div>
            </div>
        [% END %]
            </div>
        </div>
    </div>
[% END %]
