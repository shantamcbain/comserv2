[% META title = 'Edit NPM Proxy Host' %]

<div class="container">
    <h1>Edit NPM Proxy Host</h1>
    
    <div class="mb-4">
        <a href="[% c.uri_for('/npm/proxy-hosts') %]" class="btn btn-secondary">
            <i class="fa fa-arrow-left"></i> Back to Proxy Hosts
        </a>
    </div>
    
    [% IF error_message %]
    <div class="alert alert-danger">
        [% error_message %]
    </div>
    [% END %]
    
    <div class="card">
        <div class="card-header">
            <h2>Edit Proxy Host #[% proxy_host.id %]</h2>
        </div>
        <div class="card-body">
            <form method="post" action="[% c.uri_for('/npm/edit-proxy-host', proxy_host.id) %]">
                <div class="form-group">
                    <label for="domain_names">Domain Names</label>
                    <input type="text" class="form-control" id="domain_names" name="domain_names" 
                           placeholder="example.com, www.example.com" 
                           value="[% form_data.domain_names || domain_names %]" required>
                    <small class="form-text text-muted">Comma-separated list of domain names</small>
                </div>
                
                <div class="form-group">
                    <label for="forward_host">Forward Host</label>
                    <input type="text" class="form-control" id="forward_host" name="forward_host" 
                           placeholder="192.168.1.100" 
                           value="[% form_data.forward_host || proxy_host.forward_host %]" required>
                    <small class="form-text text-muted">IP address or hostname of the target server</small>
                </div>
                
                <div class="form-group">
                    <label for="forward_port">Forward Port</label>
                    <input type="number" class="form-control" id="forward_port" name="forward_port" 
                           placeholder="80" 
                           value="[% form_data.forward_port || proxy_host.forward_port %]" required>
                    <small class="form-text text-muted">Port number of the target server</small>
                </div>
                
                <div class="form-check mb-3">
                    <input type="checkbox" class="form-check-input" id="ssl_enabled" name="ssl_enabled" 
                           [% IF form_data.defined('ssl_enabled') ? form_data.ssl_enabled : proxy_host.ssl_forced %]checked[% END %]>
                    <label class="form-check-label" for="ssl_enabled">Force SSL</label>
                    <small class="form-text text-muted">Redirect HTTP to HTTPS</small>
                </div>
                
                <button type="submit" class="btn btn-primary">Update Proxy Host</button>
            </form>
        </div>
    </div>
</div>