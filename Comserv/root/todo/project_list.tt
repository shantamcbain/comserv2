<select id="project_id" name="project_id">
    <option value="">Select a project</option>
    [% FOREACH project IN projects.sort('name') %] <!-- Sort projects by name -->
        <option value="[% project.id %]" [% IF project.id == selected_project_id %]selected[% END %]>[% project.name %]</option>
        [% IF project.sub_projects.size %]
            [% FOREACH sub_project IN project.sub_projects.sort('name') %] <!-- Sort sub-projects by name -->
                <option value="[% sub_project.id %]" [% IF sub_project.id == selected_project_id %]selected[% END %]>--- [% sub_project.name %]</option>
            [% END %]
        [% END %]
    [% END %]
</select>
