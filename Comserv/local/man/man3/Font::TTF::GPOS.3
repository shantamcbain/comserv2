.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.0102 (Pod::Simple 3.45)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "Font::TTF::GPOS 3"
.TH Font::TTF::GPOS 3 2016-08-03 "perl v5.40.0" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
Font::TTF::GPOS \- Support for Opentype GPOS tables in conjunction with TTOpen
.SH DESCRIPTION
.IX Header "DESCRIPTION"
The GPOS table is one of the most complicated tables in the TTF spec and the
corresponding data structure abstraction is also not trivial. While much of the
structure of a GPOS is shared with a GSUB table via the Font::TTF::Ttopen
.SH "INSTANCE VARIABLES"
.IX Header "INSTANCE VARIABLES"
Here we describe the additions and lookup specific information for GPOS tables.
Unfortunately there is no one abstraction which seems to work comfortable for
all GPOS tables, so we will also examine how the variables are used for different
lookup types.
.PP
The following are the values allowed in the ACTION_TYPE and MATCH_TYPE variables:
.IP ACTION_TYPE 4
.IX Item "ACTION_TYPE"
This can take any of the following values
.RS 4
.IP a 8
.IX Item "a"
The ACTION is an array of anchor tables
.IP o 8
.IX Item "o"
Offset. There is no RULE array. The ADJUST variable contains a value record (see
later in this description)
.IP v 8
.IX Item "v"
The ACTION is a value record.
.IP p 8
.IX Item "p"
Pair adjustment. The ACTION contains an array of two value records for the matched
two glyphs.
.IP e 8
.IX Item "e"
Exit and Entry records. The ACTION contains an array of two anchors corresponding
to the exit and entry anchors for the glyph.
.IP l 8
.IX Item "l"
Indicates a lookup based contextual rule as per the GSUB table.
.RE
.RS 4
.RE
.IP MATCH_TYPE 4
.IX Item "MATCH_TYPE"
This can take any of the following values
.RS 4
.IP g 8
.IX Item "g"
A glyph array
.IP c 8
.IX Item "c"
An array of class values
.IP o 8
.IX Item "o"
An array of coverage tables
.RE
.RS 4
.RE
.PP
The following variables are added for Attachment Positioning Subtables:
.IP MATCH 4
.IX Item "MATCH"
This contains an array of glyphs to match against for all RULES. It is much like
having the same MATCH string in all RULES. In the cases it is used so far, it only
ever contains one element.
.IP MARKS 4
.IX Item "MARKS"
This contains a Mark array consisting of each element being a subarray of two
elements:
.RS 4
.IP CLASS 8
.IX Item "CLASS"
The class that this mark uses on its base
.IP ANCHOR 8
.IX Item "ANCHOR"
The anchor with which to attach this mark glyph
.RE
.RS 4
.Sp
The base table for mark to base, ligature or mark attachment positioning is
structured with the ACTION containing an array of anchors corresponding to each
attachment class. For ligatures, there is more than one RULE in the RULE array
corresponding to each glyph in the coverage table.
.RE
.PP
Other variables which are provided for informational purposes are:
.IP VFMT 4
.IX Item "VFMT"
Value format for the adjustment of the glyph matched by the coverage table.
.IP VFMT2 4
.IX Item "VFMT2"
Value format used in pair adjustment for the second glyph in the pair
.SS "Value Records"
.IX Subsection "Value Records"
There is a subtype used in GPOS tables called a value record. It is used to adjust
the position of a glyph from its default position. The value record is variable
length with a bitfield at the beginning to indicate which of the following
entries are included. The bitfield is not stored since it is recalculated at
write time.
.IP XPlacement 4
.IX Item "XPlacement"
Horizontal adjustment for placement (not affecting other unattached glyphs)
.IP YPlacement 4
.IX Item "YPlacement"
Vertical adjustment for placement (not affecting other unattached glyphs)
.IP XAdvance 4
.IX Item "XAdvance"
Adjust the advance width glyph (used only in horizontal writing systems)
.IP YAdvance 4
.IX Item "YAdvance"
Adjust the vertical advance (used only in vertical writing systems)
.IP XPlaDevice 4
.IX Item "XPlaDevice"
Device table for device specific adjustment of horizontal placement
.IP YPlaDevice 4
.IX Item "YPlaDevice"
Device table for device specific adjustment of vertical placement
.IP XAdvDevice 4
.IX Item "XAdvDevice"
Device table for device specific adjustment of horizontal advance
.IP YAdDevice 4
.IX Item "YAdDevice"
Device table for device specific adjustment of vertical advance
.IP XIdPlacement 4
.IX Item "XIdPlacement"
Horizontal placement metric id (for Multiple Master fonts \- but that is all I know!)
.IP YIdPlacement 4
.IX Item "YIdPlacement"
Vertical placement metric id
.IP XIdAdvance 4
.IX Item "XIdAdvance"
Horizontal advance metric id
.IP YIdAdvance 4
.IX Item "YIdAdvance"
Vertical advance metric id
.SH "CORRESPONDANCE TO LAYOUT TYPES"
.IX Header "CORRESPONDANCE TO LAYOUT TYPES"
Here is what is stored in the ACTION_TYPE and MATCH_TYPE for each of the known
GPOS subtable types:
.PP
.Vb 3
\&                1.1 1.2 2.1 2.2 3   4   5   6   7.1 7.2 7.3 8.1 8.2 8.3
\&  ACTION_TYPE    o   v   p   p  e   a   a   a    l   l   l   l   l   l
\&  MATCH_TYPE             g   c                   g   c   o   g   c   o
.Ve
.SH METHODS
.IX Header "METHODS"
.SS read_sub
.IX Subsection "read_sub"
Reads the subtable into the data structures
.ie n .SS $t\->extension
.el .SS \f(CW$t\fP\->extension
.IX Subsection "$t->extension"
Returns the table type number for the extension table
.ie n .SS $t\->out_sub
.el .SS \f(CW$t\fP\->out_sub
.IX Subsection "$t->out_sub"
Outputs the subtable to the given filehandle
.ie n .SS "$t\->read_value($format, $base, $lookup, $fh)"
.el .SS "\f(CW$t\fP\->read_value($format, \f(CW$base\fP, \f(CW$lookup\fP, \f(CW$fh\fP)"
.IX Subsection "$t->read_value($format, $base, $lookup, $fh)"
Reads a value record from the current location in the file, according to the
format given.
.ie n .SS "$t\->read_delta($offset, $base, $lookup, $fh)"
.el .SS "\f(CW$t\fP\->read_delta($offset, \f(CW$base\fP, \f(CW$lookup\fP, \f(CW$fh\fP)"
.IX Subsection "$t->read_delta($offset, $base, $lookup, $fh)"
Reads a delta (device table) at the given offset if it hasn not already been read.
Store the offset and item in the lookup cache ($lookup\->{' CACHE'})
.ie n .SS "$t\->read_anchor($offset, $base, $lookup, $fh)"
.el .SS "\f(CW$t\fP\->read_anchor($offset, \f(CW$base\fP, \f(CW$lookup\fP, \f(CW$fh\fP)"
.IX Subsection "$t->read_anchor($offset, $base, $lookup, $fh)"
Reads an Anchor table at the given offset if it has not already been read.
.ie n .SS $t\->fmt_value
.el .SS \f(CW$t\fP\->fmt_value
.IX Subsection "$t->fmt_value"
Returns the value format for a given value record
.ie n .SS $t\->out_value
.el .SS \f(CW$t\fP\->out_value
.IX Subsection "$t->out_value"
Returns the output string for the outputting of the value for a given format. Also
updates the offset cache for any device tables referenced.
.SH AUTHOR
.IX Header "AUTHOR"
Martin Hosken <http://scripts.sil.org/FontUtils>.
.SH LICENSING
.IX Header "LICENSING"
Copyright (c) 1998\-2016, SIL International (http://www.sil.org)
.PP
This module is released under the terms of the Artistic License 2.0. 
For details, see the full text of the license in the file LICENSE.
